var $=jQuery,checkSuccess=function(e){""===e.val()?e.removeClass("success").next("label").removeClass("stayup"):e.is('input[type="checkbox"], input[type="radio"]')||e.addClass("success").next("label").addClass("stayup")},formHandleResponse=function(e,t){if(t.removeClass("loading"),e.success){if(!t.find(".form-success").length){var o=$('<div class="form-success"></div>');t.html(o)}t.find(".form.error").remove(),t.find(".form-success").html(e.success),t.addClass("success")}if(e.error){if(!t.find(".form-error").length){var r=$('<div class="form-error"></div>');t.append(r)}t.find(".form-error").html(e.error),t.addClass("error")}},validateForm=function(e){var t=!0;return e.find("input").each(function(){$(this).hasClass("error")&&(t=!1)}),t?!0:!1},validateEmail=function(e){var t=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return t.test(e)},formJsInit=function(){$("form input, form textarea").each(function(){checkSuccess($(this))}),autosize($("form textarea:not(.no-autosize):visible")),$("form input, form textarea").each(function(){var e=$(this);checkSuccess(e)}),$("form input, form textarea").off().on("blur",function(e){var t=$(e.target);t.removeClass("error"),checkSuccess(t),t.is('input[type="email"]')&&""!==t.val()&&(validateEmail(t.val())||t.addClass("error"))}),$("form").off().on({keyup:function(e){var t=$(e.target);if(t.removeClass("error").removeClass("success"),t.is('input[type="number"]')){var o=t.val().replace(/[^0-9]/g,"");t.val(o)}},click:function(e){var t=$(e.target);if(t.is(".front-form-expand")&&(e.preventDefault(),t.hide(),$(this).addClass("active").animate({opacity:1},200),$(".front-form").find(".hidden").removeClass("hidden"),$("html,body").animate({scrollTop:$(".front-form").offset().top-$(".site-header").height()}),autosize($("form textarea:not(.no-autosize):visible"))),t.is(".submit")){e.preventDefault();var o=t.parents("form"),r=o.attr("action"),s=o.serialize();!validateForm(o)||o.hasClass("loading")||o.hasClass("success")||(o.addClass("loading"),$.ajax({url:r,type:"POST",data:s,dataType:"json",success:function(e){formHandleResponse(e,o)}}))}}})};jQuery(function(){formJsInit()}),function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.autosize=t()}(this,function(){function e(e){function t(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),e.style.wordWrap="break-word";var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,r="none"!==t.maxHeight?parseFloat(t.maxHeight):!1,s="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),o()}function o(){var t=e.style.height,o=document.documentElement.scrollTop,n=document.body.scrollTop;e.style.height="auto";var a=e.scrollHeight+s;if(r!==!1&&a>r?(a=r,"scroll"!==e.style.overflowY&&(e.style.overflowY="scroll")):"hidden"!==e.style.overflowY&&(e.style.overflowY="hidden"),e.style.height=a+"px",document.documentElement.scrollTop=o,document.body.scrollTop=n,t!==e.style.height){var i=document.createEvent("Event");i.initEvent("autosize.resized",!0,!1),e.dispatchEvent(i)}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!e.hasAttribute("data-autosize-on")){var r,s;"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",o),window.addEventListener("resize",o),e.addEventListener("input",o),e.addEventListener("autosize.update",o),e.addEventListener("autosize.destroy",function(t){window.removeEventListener("resize",o),e.removeEventListener("input",o),e.removeEventListener("keyup",o),e.removeEventListener("autosize.destroy"),Object.keys(t).forEach(function(o){e.style[o]=t[o]}),e.removeAttribute("data-autosize-on")}.bind(e,{height:e.style.height,overflow:e.style.overflow,overflowY:e.style.overflowY,wordWrap:e.style.wordWrap,resize:e.style.resize})),e.setAttribute("data-autosize-on",!0),e.style.overflow="hidden",e.style.overflowY="hidden",t()}}return"function"!=typeof window.getComputedStyle?function(e){return e}:function(t){return t&&t.length?Array.prototype.forEach.call(t,e):t&&t.nodeName&&e(t),t}});